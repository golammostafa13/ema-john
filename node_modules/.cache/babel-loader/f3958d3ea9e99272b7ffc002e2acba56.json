{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Documents/ema-john/ema-john/src/components/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { UserContext } from \"../../App\";\nimport { createUserWithEmailAndPassword, fbSignIn, firebaseConfig, signIn, signOut, signUserWithEmailAndPassword } from \"./LoginManager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  firebaseConfig();\n  const [user, setUser] = useState({\n    name: '',\n    email: '',\n    photoURL: '',\n    password: '',\n    isSignedIn: false,\n    error: '',\n    success: false\n  });\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const [newUser, setNewUser] = useState(false);\n  const history = useHistory();\n  const location = useLocation();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  };\n\n  const handleSignIn = () => {\n    signIn().then(res => {\n      setUser(res);\n      setLoggedInUser(res);\n    });\n  };\n\n  const handleSignOut = () => {\n    signOut().then(res => {\n      setUser(res);\n      setLoggedInUser(res);\n    });\n  };\n\n  const handleFbSignIn = () => {\n    fbSignIn().then(res => {\n      setUser(res);\n      setLoggedInUser(res);\n      history.replace(from);\n    });\n  };\n\n  const handleSubmit = e => {\n    // console.log('hello');\n    if (newUser && user.email && user.password) {\n      createUserWithEmailAndPassword(user.name, user.email, user.password).then(res => {\n        setUser(res);\n        setLoggedInUser(res);\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      signUserWithEmailAndPassword(user.email, user.password).then(res => {\n        setUser(res);\n        setLoggedInUser(res);\n        history.replace(from);\n      }).catch(res => {\n        setUser(res);\n        setLoggedInUser(res);\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  const handleBlur = e => {\n    // console.log(e.target.name, e.target.value);\n    let isFieldValid = true;\n\n    if (e.target.name === \"email\") {\n      let isEmailValid = /\\S+@\\S+\\.\\S/.test(e.target.value);\n      isFieldValid = isEmailValid;\n    }\n\n    if (e.target.name === \"password\") {\n      const checkLength = e.target.value.length > 6;\n      const numberCheck = /\\d{1}/.test(e.target.value);\n      isFieldValid = checkLength && numberCheck;\n    }\n\n    if (isFieldValid) {\n      var _e$target, _e$target2;\n\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.name] = e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.value; // console.log(newUserInfo);\n\n      setUser(newUserInfo);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [user.isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignOut,\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignIn,\n      children: \"Sign In with google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 61\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleFbSignIn,\n      children: \"Sign in with facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        onChange: () => setNewUser(!newUser)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"New User Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [newUser && /*#__PURE__*/_jsxDEV(\"input\", {\n          onBlur: handleBlur,\n          name: \"name\",\n          type: \"text\",\n          placeholder: \"Your name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 107\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onBlur: handleBlur,\n          name: \"email\",\n          type: \"email\",\n          placeholder: \"Enter email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 107\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onBlur: handleBlur,\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 110\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: newUser ? 'Sign Up' : 'Sign In'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: user.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), user.success && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'green'\n        },\n        children: [\"User \", !newUser ? 'signed in' : 'created', \" successfully\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"415DRASeji3IzPrf3jDP/FSZLUY=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/mostafa/Documents/ema-john/ema-john/src/components/Login/Login.js"],"names":["useContext","useState","useHistory","useLocation","UserContext","createUserWithEmailAndPassword","fbSignIn","firebaseConfig","signIn","signOut","signUserWithEmailAndPassword","Login","user","setUser","name","email","photoURL","password","isSignedIn","error","success","loggedInUser","setLoggedInUser","newUser","setNewUser","history","location","from","state","pathname","handleSignIn","then","res","handleSignOut","handleFbSignIn","replace","handleSubmit","e","catch","preventDefault","handleBlur","isFieldValid","target","isEmailValid","test","value","checkLength","length","numberCheck","newUserInfo","textAlign","color"],"mappings":"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","sourcesContent":["import { useContext, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { UserContext } from \"../../App\";\nimport { createUserWithEmailAndPassword, fbSignIn, firebaseConfig, signIn, signOut, signUserWithEmailAndPassword } from \"./LoginManager\";\nfunction Login() {\n  firebaseConfig();\n  const [user, setUser] = useState({\n    name: '',\n    email: '',\n    photoURL: '',\n    password: '',\n    isSignedIn: false,\n    error: '',\n    success: false,\n  })\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const [newUser, setNewUser] = useState(false);\n\n  const history = useHistory();\n  const location = useLocation();\n  let { from } = location.state || { from: { pathname: \"/\" } };\n\n  const handleSignIn = () =>{\n    signIn()\n    .then(res =>{\n      setUser(res);\n      setLoggedInUser(res);\n    })\n  }\n  const handleSignOut = () =>{\n    signOut()\n    .then(res =>{\n      setUser(res);\n      setLoggedInUser(res);\n    })\n  }\n\n  const  handleFbSignIn = () => {\n    fbSignIn()\n    .then(res =>{\n      setUser(res);\n      setLoggedInUser(res);\n      history.replace(from);\n    })\n  }\n\n  const handleSubmit = (e)=>{\n    // console.log('hello');\n    if(newUser && user.email && user.password){\n      createUserWithEmailAndPassword(user.name, user.email, user.password)\n      .then(res=>{\n        setUser(res);\n        setLoggedInUser(res);\n      })\n    }\n    if(!newUser && user.email && user.password){\n      signUserWithEmailAndPassword(user.email, user.password)\n      .then(res => {\n        setUser(res);\n        setLoggedInUser(res);\n        history.replace(from);\n      })\n      .catch(res => {\n        setUser(res);\n        setLoggedInUser(res);\n      })\n    }\n    e.preventDefault();\n  }\n  \n  const handleBlur = (e) =>{\n    // console.log(e.target.name, e.target.value);\n    let isFieldValid=true;\n    if(e.target.name===\"email\"){\n       let isEmailValid = /\\S+@\\S+\\.\\S/.test(e.target.value);\n       isFieldValid = isEmailValid;\n    }if(e.target.name === \"password\"){\n        const checkLength = e.target.value.length > 6;\n        const numberCheck = /\\d{1}/.test(e.target.value);\n        isFieldValid = checkLength && numberCheck;\n      }\n    if(isFieldValid){\n      const newUserInfo = {...user};\n      newUserInfo[e?.target?.name] = e?.target?.value;\n      // console.log(newUserInfo);\n      setUser(newUserInfo);\n    }\n  }\n \n  return (\n    <div style={{textAlign: 'center'}}>\n      { user.isSignedIn ?\n        <button onClick={handleSignOut}>Sign Out</button> : <button onClick={handleSignIn}>Sign In with google</button>\n      } \n      {/* {user.isSignedIn && } */}\n      <br></br>\n      <button onClick={handleFbSignIn}>Sign in with facebook</button>\n      <div>\n        <input type=\"checkbox\" onChange={()=>setNewUser(!newUser)}></input> \n        <label>New User Sign in</label>\n        <form onSubmit={handleSubmit}>\n          {newUser && <input onBlur={handleBlur} name=\"name\" type=\"text\" placeholder=\"Your name\"></input>}<br></br>\n          <input onBlur={handleBlur} name=\"email\" type=\"email\" placeholder=\"Enter email\" required></input><br></br>\n          <input onBlur={handleBlur} name=\"password\" type=\"password\" placeholder=\"password\" required></input><br></br>\n          <button type=\"submit\">{newUser?'Sign Up':'Sign In'}</button>\n        </form>\n        <p style={{color: 'red'}}>{user.error}</p>\n        {user.success && <p style={{color: 'green'}}>User {!newUser?'signed in': 'created'} successfully</p>}\n        \n      </div>\n    </div>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}